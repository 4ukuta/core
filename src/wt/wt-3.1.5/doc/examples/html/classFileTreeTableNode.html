<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Wt examples: FileTreeTableNode Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>FileTreeTableNode Class Reference<br>
<small>
[<a class="el" href="group__fileexplorer.html">File Explorer example</a>]</small>
</h1><!-- doxytag: class="FileTreeTableNode" --><!-- doxytag: inherits="Wt::WTreeTableNode" -->A single node in a file tree table.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="FileTreeTableNode_8h-source.html">FileTreeTableNode.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for FileTreeTableNode:</div>
<div class="dynsection">
<p><center><img src="classFileTreeTableNode__inherit__graph.png" border="0" usemap="#FileTreeTableNode__inherit__map" alt="Inheritance graph"></center>
<map name="FileTreeTableNode__inherit__map">
<area shape="rect" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeTableNode.html" title="Wt::WTreeTableNode" alt="" coords="13,304,157,331"><area shape="rect" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeNode.html" title="Wt::WTreeNode" alt="" coords="29,229,141,256"><area shape="rect" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WCompositeWidget.html" title="Wt::WCompositeWidget" alt="" coords="5,155,165,181"><area shape="rect" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WWidget.html" title="Wt::WWidget" alt="" coords="37,80,133,107"><area shape="rect" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WObject.html" title="Wt::WObject" alt="" coords="37,5,133,32"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="classFileTreeTableNode-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileTreeTableNode.html#d3dcd44cf30aaab34ee104f5bce5b1fe">FileTreeTableNode</a> (const boost::filesystem::path &amp;path)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct a new node for the given file.  <a href="#d3dcd44cf30aaab34ee104f5bce5b1fe"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileTreeTableNode.html#4f627886ee0f4b3a6cf2380959935228">populate</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reimplements WTreeNode::populate to read files within a directory.  <a href="#4f627886ee0f4b3a6cf2380959935228"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileTreeTableNode.html#5454d4ea1a4ab067a3179426024343d5">expandable</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reimplements WTreeNode::expandable.  <a href="#5454d4ea1a4ab067a3179426024343d5"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WIconPair.html">Wt::WIconPair</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileTreeTableNode.html#573bcecf27009f71e026600fbbdbf417">createIcon</a> (const boost::filesystem::path &amp;path)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create the iconpair for representing the path.  <a href="#573bcecf27009f71e026600fbbdbf417"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">boost::filesystem::path&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFileTreeTableNode.html#27263407eedaf759152902162099da62">path_</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The path.  <a href="#27263407eedaf759152902162099da62"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A single node in a file tree table. 
<p>
The node manages the details about one file, and if the file is a directory, populates a subtree with nodes for every directory item.<p>
The tree node reimplements <a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeNode.html#9ab70c6020dbd9ea3204c625029a7a1b">Wt::WTreeTableNode::populate()</a> to populate a directory node only when the node is expanded. In this way, only directories that are actually browsed are loaded from disk. 
<p>Definition at line <a class="el" href="FileTreeTableNode_8h-source.html#l00028">28</a> of file <a class="el" href="FileTreeTableNode_8h-source.html">FileTreeTableNode.h</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="d3dcd44cf30aaab34ee104f5bce5b1fe"></a><!-- doxytag: member="FileTreeTableNode::FileTreeTableNode" ref="d3dcd44cf30aaab34ee104f5bce5b1fe" args="(const boost::filesystem::path &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileTreeTableNode::FileTreeTableNode           </td>
          <td>(</td>
          <td class="paramtype">const boost::filesystem::path &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct a new node for the given file. 
<p>

<p>Definition at line <a class="el" href="FileTreeTableNode_8C-source.html#l00022">22</a> of file <a class="el" href="FileTreeTableNode_8C-source.html">FileTreeTableNode.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00023"></a>00023   : <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeTableNode.html#d5c6c8ff8d8d83d386271594444a2691">WTreeTableNode</a>(Wt::widen(path.leaf()), <a class="code" href="classFileTreeTableNode.html#573bcecf27009f71e026600fbbdbf417" title="Create the iconpair for representing the path.">createIcon</a>(path)),
<a name="l00024"></a>00024     <a class="code" href="classFileTreeTableNode.html#27263407eedaf759152902162099da62" title="The path.">path_</a>(path)
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026   <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeNode.html#32c24104359b595cbaf914e35accb3b4">label</a>()-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WText.html#f22c64c4c5fed3d2aef0915a7e5c5866">setTextFormat</a>(PlainText);
<a name="l00027"></a>00027 
<a name="l00028"></a>00028   <span class="keywordflow">if</span> (boost::filesystem::exists(path)) {
<a name="l00029"></a>00029     <span class="keywordflow">if</span> (!boost::filesystem::is_directory(path)) {
<a name="l00030"></a>00030       <span class="keywordtype">int</span> fsize = (int)boost::filesystem::file_size(path);
<a name="l00031"></a>00031       <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeTableNode.html#136a48e8cda5e0abbfd0e0d8cf008b36">setColumnWidget</a>(1, <span class="keyword">new</span> <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WText.html">WText</a>(boost::lexical_cast&lt;std::wstring&gt;(fsize)));
<a name="l00032"></a>00032       <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeTableNode.html#5e9f7b5afb4d92175a3d6307727eee81">columnWidget</a>(1)-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WWidget.html#4be23ecf48d5968efb5d926e38e01708">setStyleClass</a>(<span class="stringliteral">"fsize"</span>);
<a name="l00033"></a>00033     } <span class="keywordflow">else</span>
<a name="l00034"></a>00034       <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeNode.html#60428cfc48b2a39550efc308b38406b2">setSelectable</a>(<span class="keyword">false</span>);
<a name="l00035"></a>00035 
<a name="l00036"></a>00036     std::time_t t = boost::filesystem::last_write_time(path);
<a name="l00037"></a>00037     <span class="keyword">struct </span>tm ttm;
<a name="l00038"></a>00038 <span class="preprocessor">#if WIN32</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>    ttm=*localtime(&amp;t);
<a name="l00040"></a>00040 <span class="preprocessor">#else</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>    localtime_r(&amp;t, &amp;ttm);
<a name="l00042"></a>00042 <span class="preprocessor">#endif</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044     <span class="keywordtype">char</span> c[100];
<a name="l00045"></a>00045     strftime(c, 100, <span class="stringliteral">"%b %d %Y"</span>, &amp;ttm);
<a name="l00046"></a>00046 
<a name="l00047"></a>00047     <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeTableNode.html#136a48e8cda5e0abbfd0e0d8cf008b36">setColumnWidget</a>(2, <span class="keyword">new</span> <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WText.html">WText</a>(c));
<a name="l00048"></a>00048     <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeTableNode.html#5e9f7b5afb4d92175a3d6307727eee81">columnWidget</a>(2)-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WWidget.html#4be23ecf48d5968efb5d926e38e01708">setStyleClass</a>(<span class="stringliteral">"date"</span>);
<a name="l00049"></a>00049   }
<a name="l00050"></a>00050 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="4f627886ee0f4b3a6cf2380959935228"></a><!-- doxytag: member="FileTreeTableNode::populate" ref="4f627886ee0f4b3a6cf2380959935228" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileTreeTableNode::populate           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reimplements WTreeNode::populate to read files within a directory. 
<p>

<p>Reimplemented from <a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeNode.html#9ab70c6020dbd9ea3204c625029a7a1b">Wt::WTreeNode</a>.</p>

<p>Definition at line <a class="el" href="FileTreeTableNode_8C-source.html#l00063">63</a> of file <a class="el" href="FileTreeTableNode_8C-source.html">FileTreeTableNode.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00064"></a>00064 {
<a name="l00065"></a>00065   <span class="keywordflow">try</span> {
<a name="l00066"></a>00066     <span class="keywordflow">if</span> (boost::filesystem::is_directory(<a class="code" href="classFileTreeTableNode.html#27263407eedaf759152902162099da62" title="The path.">path_</a>)) {
<a name="l00067"></a>00067       std::set&lt;boost::filesystem::path&gt; paths;
<a name="l00068"></a>00068       boost::filesystem::directory_iterator end_itr;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070       <span class="keywordflow">for</span> (boost::filesystem::directory_iterator i(<a class="code" href="classFileTreeTableNode.html#27263407eedaf759152902162099da62" title="The path.">path_</a>); i != end_itr; ++i)
<a name="l00071"></a>00071         paths.insert(*i);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073       <span class="keywordflow">for</span> (std::set&lt;boost::filesystem::path&gt;::iterator i = paths.begin();
<a name="l00074"></a>00074            i != paths.end(); ++i)
<a name="l00075"></a>00075         <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeNode.html#deb2bd7c946ef9c7bb5b72b3f88453a6">addChildNode</a>(<span class="keyword">new</span> <a class="code" href="classFileTreeTableNode.html#d3dcd44cf30aaab34ee104f5bce5b1fe" title="Construct a new node for the given file.">FileTreeTableNode</a>(*i));
<a name="l00076"></a>00076     }
<a name="l00077"></a>00077   } <span class="keywordflow">catch</span> (boost::filesystem::filesystem_error&amp; e) {
<a name="l00078"></a>00078     std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;
<a name="l00079"></a>00079   }
<a name="l00080"></a>00080 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5454d4ea1a4ab067a3179426024343d5"></a><!-- doxytag: member="FileTreeTableNode::expandable" ref="5454d4ea1a4ab067a3179426024343d5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool FileTreeTableNode::expandable           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reimplements WTreeNode::expandable. 
<p>

<p>Reimplemented from <a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeNode.html#4f19826594b5b080b0a436c474c31f61">Wt::WTreeNode</a>.</p>

<p>Definition at line <a class="el" href="FileTreeTableNode_8C-source.html#l00082">82</a> of file <a class="el" href="FileTreeTableNode_8C-source.html">FileTreeTableNode.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00083"></a>00083 {
<a name="l00084"></a>00084   <span class="keywordflow">if</span> (!<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WTreeNode.html#ee388605958559d124616ce9dbfc7df5">populated</a>()) {
<a name="l00085"></a>00085     <span class="keywordflow">return</span> boost::filesystem::is_directory(<a class="code" href="classFileTreeTableNode.html#27263407eedaf759152902162099da62" title="The path.">path_</a>);
<a name="l00086"></a>00086   } <span class="keywordflow">else</span>
<a name="l00087"></a>00087     <span class="keywordflow">return</span> WTreeTableNode::expandable();
<a name="l00088"></a>00088 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="573bcecf27009f71e026600fbbdbf417"></a><!-- doxytag: member="FileTreeTableNode::createIcon" ref="573bcecf27009f71e026600fbbdbf417" args="(const boost::filesystem::path &amp;path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WIconPair.html">WIconPair</a> * FileTreeTableNode::createIcon           </td>
          <td>(</td>
          <td class="paramtype">const boost::filesystem::path &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create the iconpair for representing the path. 
<p>

<p>Definition at line <a class="el" href="FileTreeTableNode_8C-source.html#l00052">52</a> of file <a class="el" href="FileTreeTableNode_8C-source.html">FileTreeTableNode.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00053"></a>00053 {
<a name="l00054"></a>00054   <span class="keywordflow">if</span> (boost::filesystem::exists(path)
<a name="l00055"></a>00055       &amp;&amp; boost::filesystem::is_directory(path))
<a name="l00056"></a>00056     <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WIconPair.html">WIconPair</a>(<span class="stringliteral">"icons/yellow-folder-closed.png"</span>,
<a name="l00057"></a>00057                          <span class="stringliteral">"icons/yellow-folder-open.png"</span>, <span class="keyword">false</span>);
<a name="l00058"></a>00058   <span class="keywordflow">else</span>
<a name="l00059"></a>00059     <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WIconPair.html">WIconPair</a>(<span class="stringliteral">"icons/document.png"</span>,
<a name="l00060"></a>00060                          <span class="stringliteral">"icons/yellow-folder-open.png"</span>, <span class="keyword">false</span>);
<a name="l00061"></a>00061 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="27263407eedaf759152902162099da62"></a><!-- doxytag: member="FileTreeTableNode::path_" ref="27263407eedaf759152902162099da62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::filesystem::path <a class="el" href="classFileTreeTableNode.html#27263407eedaf759152902162099da62">FileTreeTableNode::path_</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The path. 
<p>

<p>Definition at line <a class="el" href="FileTreeTableNode_8h-source.html#l00037">37</a> of file <a class="el" href="FileTreeTableNode_8h-source.html">FileTreeTableNode.h</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>/home/koen/project/wt/public-git/wt/examples/filetreetable/<a class="el" href="FileTreeTableNode_8h-source.html">FileTreeTableNode.h</a><li>/home/koen/project/wt/public-git/wt/examples/filetreetable/<a class="el" href="FileTreeTableNode_8C-source.html">FileTreeTableNode.C</a></ul>
</div>
<hr size="1"><address style="align: right;"><small>
Generated on Fri Sep 10 16:32:57 2010 for <a href="http://www.webtoolkit.eu/wt/">Wt</a> by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6</small></address>
</body>
</html>
