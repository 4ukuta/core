<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Wt examples: Git Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Git Class Reference<br>
<small>
[<a class="el" href="group__gitmodelexample.html">Git model example</a>]</small>
</h1><!-- doxytag: class="Git" -->Git utility class for browsing git archives.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="Git_8h-source.html">Git.h</a>&gt;</code>
<p>

<p>
<a href="classGit-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#b282f46c36a47ddff9bc7be7c993041a">ObjectType</a> { <a class="el" href="classGit.html#b282f46c36a47ddff9bc7be7c993041ae94d3a7ff6594f6b3b0dc121fbd01564">Tree</a>, 
<a class="el" href="classGit.html#b282f46c36a47ddff9bc7be7c993041a5952f4b5af05765dda2c75c09a1370b6">Commit</a>, 
<a class="el" href="classGit.html#b282f46c36a47ddff9bc7be7c993041a64c3a7b641cdc0cb2c4203fc0bef1a4a">Blob</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Git object type.  <a href="classGit.html#b282f46c36a47ddff9bc7be7c993041a">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::list&lt; std::pair<br>
&lt; std::string, std::string &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#23da7b806839f7a482935a44142b04c9">Cache</a></td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#fdc93b8c52e55a1977c9333d71561cd5">Git</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#fdc93b8c52e55a1977c9333d71561cd5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#b21f8d442557b07321a274b5e976f1ac">setRepositoryPath</a> (const std::string &amp;repository)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the git repository path.  <a href="#b21f8d442557b07321a274b5e976f1ac"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classGit_1_1ObjectId.html">ObjectId</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#521bba51875ea14c9e39a14fcde01e04">getCommitTree</a> (const std::string &amp;revision) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the tree for a particular revision.  <a href="#521bba51875ea14c9e39a14fcde01e04"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classGit_1_1ObjectId.html">ObjectId</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#b432b071c7d22343a7ac136c35230251">getCommit</a> (const std::string &amp;revision) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the commit for a particular revision.  <a href="#b432b071c7d22343a7ac136c35230251"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classGit_1_1ObjectId.html">ObjectId</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#62bf9de2511aeb8e036a339ec8be8423">getTreeFromCommit</a> (const <a class="el" href="classGit_1_1ObjectId.html">ObjectId</a> &amp;commit) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the tree for a particular commit.  <a href="#62bf9de2511aeb8e036a339ec8be8423"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structGit_1_1Object.html">Object</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#910f3a6123b494897cdedf7ba4ef648b">treeGetObject</a> (const <a class="el" href="classGit_1_1ObjectId.html">ObjectId</a> &amp;tree, int index) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get some info on a tree object.  <a href="#910f3a6123b494897cdedf7ba4ef648b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#be86381afbbab0adb0680ae268752f1f">treeSize</a> (const <a class="el" href="classGit_1_1ObjectId.html">ObjectId</a> &amp;tree) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of objects inside a tree object.  <a href="#be86381afbbab0adb0680ae268752f1f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#cf2d699d9f9bdfb42afb0f61e85b2f88">catFile</a> (const <a class="el" href="classGit_1_1ObjectId.html">ObjectId</a> &amp;<a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/group__dbo.html#gc98c1f90b00ed9ce243c6412da3ac489">id</a>) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the raw contents of a git object.  <a href="#cf2d699d9f9bdfb42afb0f61e85b2f88"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#04766dfcc9edcae7c12e6ff373176c7c">checkRepository</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks the repository.  <a href="#04766dfcc9edcae7c12e6ff373176c7c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#3dccd1727396de007ec5b43e96930a1b">getCmdResult</a> (const std::string &amp;cmd, std::string &amp;result, const std::string &amp;tag) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a line identified by a tag from the output of a git command.  <a href="#3dccd1727396de007ec5b43e96930a1b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#5c0f41b8540cae5aef55343dcbbbf8b6">getCmdResult</a> (const std::string &amp;cmd, std::string &amp;result, int index) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the <em>i</em>th line from the output of a git command.  <a href="#5c0f41b8540cae5aef55343dcbbbf8b6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#451e493481c2b397497107a6e60a6360">getCmdResultLineCount</a> (const std::string &amp;cmd) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of lines in the output of a git command.  <a href="#451e493481c2b397497107a6e60a6360"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#5f478cb0fb21487e60f87b93d4277440">repository_</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The path to the repository.  <a href="#5f478cb0fb21487e60f87b93d4277440"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classGit.html#23da7b806839f7a482935a44142b04c9">Cache</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit.html#0097b8efc1e8530cc11133622684e9ef">cache_</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A small LRU cache that stores results of git commands.  <a href="#0097b8efc1e8530cc11133622684e9ef"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit_1_1Exception.html">Exception</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Exception class.  <a href="classGit_1_1Exception.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structGit_1_1Object.html">Object</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Git object.  <a href="structGit_1_1Object.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGit_1_1ObjectId.html">ObjectId</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Git object Id.  <a href="classGit_1_1ObjectId.html#_details">More...</a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Git utility class for browsing git archives. 
<p>
Far from complete! Only browses git revisions. 
<p>Definition at line <a class="el" href="Git_8h-source.html#l00023">23</a> of file <a class="el" href="Git_8h-source.html">Git.h</a>.</p>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="23da7b806839f7a482935a44142b04c9"></a><!-- doxytag: member="Git::Cache" ref="23da7b806839f7a482935a44142b04c9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::list&lt;std::pair&lt;std::string, std::string&gt; &gt; <a class="el" href="classGit.html#23da7b806839f7a482935a44142b04c9">Git::Cache</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="Git_8h-source.html#l00119">119</a> of file <a class="el" href="Git_8h-source.html">Git.h</a>.</p>

</div>
</div><p>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="b282f46c36a47ddff9bc7be7c993041a"></a><!-- doxytag: member="Git::ObjectType" ref="b282f46c36a47ddff9bc7be7c993041a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classGit.html#b282f46c36a47ddff9bc7be7c993041a">Git::ObjectType</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Git object type. 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="b282f46c36a47ddff9bc7be7c993041ae94d3a7ff6594f6b3b0dc121fbd01564"></a><!-- doxytag: member="Tree" ref="b282f46c36a47ddff9bc7be7c993041ae94d3a7ff6594f6b3b0dc121fbd01564" args="" -->Tree</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="b282f46c36a47ddff9bc7be7c993041a5952f4b5af05765dda2c75c09a1370b6"></a><!-- doxytag: member="Commit" ref="b282f46c36a47ddff9bc7be7c993041a5952f4b5af05765dda2c75c09a1370b6" args="" -->Commit</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="b282f46c36a47ddff9bc7be7c993041a64c3a7b641cdc0cb2c4203fc0bef1a4a"></a><!-- doxytag: member="Blob" ref="b282f46c36a47ddff9bc7be7c993041a64c3a7b641cdc0cb2c4203fc0bef1a4a" args="" -->Blob</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="Git_8h-source.html#l00058">58</a> of file <a class="el" href="Git_8h-source.html">Git.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00058"></a>00058 { <a class="code" href="classGit.html#b282f46c36a47ddff9bc7be7c993041ae94d3a7ff6594f6b3b0dc121fbd01564">Tree</a>, <a class="code" href="classGit.html#b282f46c36a47ddff9bc7be7c993041a5952f4b5af05765dda2c75c09a1370b6">Commit</a>, <a class="code" href="classGit.html#b282f46c36a47ddff9bc7be7c993041a64c3a7b641cdc0cb2c4203fc0bef1a4a">Blob</a> };
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="fdc93b8c52e55a1977c9333d71561cd5"></a><!-- doxytag: member="Git::Git" ref="fdc93b8c52e55a1977c9333d71561cd5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Git::Git           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor. 
<p>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00177">177</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00178"></a>00178   : <a class="code" href="classGit.html#0097b8efc1e8530cc11133622684e9ef" title="A small LRU cache that stores results of git commands.">cache_</a>(3) <span class="comment">// cache of 3 git results</span>
<a name="l00179"></a>00179 { }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b21f8d442557b07321a274b5e976f1ac"></a><!-- doxytag: member="Git::setRepositoryPath" ref="b21f8d442557b07321a274b5e976f1ac" args="(const std::string &amp;repository)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Git::setRepositoryPath           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>repository</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the git repository path. 
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: if the path does not specify a valid repository. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00181">181</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00182"></a>00182 { 
<a name="l00183"></a>00183   <a class="code" href="classGit.html#5f478cb0fb21487e60f87b93d4277440" title="The path to the repository.">repository_</a> = repositoryPath;
<a name="l00184"></a>00184   <a class="code" href="classGit.html#04766dfcc9edcae7c12e6ff373176c7c" title="Checks the repository.">checkRepository</a>();
<a name="l00185"></a>00185 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="521bba51875ea14c9e39a14fcde01e04"></a><!-- doxytag: member="Git::getCommitTree" ref="521bba51875ea14c9e39a14fcde01e04" args="(const std::string &amp;revision) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGit_1_1ObjectId.html">Git::ObjectId</a> Git::getCommitTree           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>revision</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the tree for a particular revision. 
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case of a git error. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00187">187</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00188"></a>00188 {
<a name="l00189"></a>00189   <a class="code" href="classGit_1_1ObjectId.html" title="Git object Id.">Git::ObjectId</a> commit = <a class="code" href="classGit.html#b432b071c7d22343a7ac136c35230251" title="Get the commit for a particular revision.">getCommit</a>(revision);
<a name="l00190"></a>00190   <span class="keywordflow">return</span> <a class="code" href="classGit.html#62bf9de2511aeb8e036a339ec8be8423" title="Get the tree for a particular commit.">getTreeFromCommit</a>(commit);
<a name="l00191"></a>00191 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b432b071c7d22343a7ac136c35230251"></a><!-- doxytag: member="Git::getCommit" ref="b432b071c7d22343a7ac136c35230251" args="(const std::string &amp;revision) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGit_1_1ObjectId.html">Git::ObjectId</a> Git::getCommit           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>revision</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the commit for a particular revision. 
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case of a git error. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00203">203</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00204"></a>00204 {
<a name="l00205"></a>00205   std::string sha1Commit;
<a name="l00206"></a>00206   <a class="code" href="classGit.html#3dccd1727396de007ec5b43e96930a1b" title="Returns a line identified by a tag from the output of a git command.">getCmdResult</a>(<span class="stringliteral">"rev-parse "</span> + revision, sha1Commit, 0);
<a name="l00207"></a>00207   <span class="keywordflow">return</span> ObjectId(sha1Commit);
<a name="l00208"></a>00208 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="62bf9de2511aeb8e036a339ec8be8423"></a><!-- doxytag: member="Git::getTreeFromCommit" ref="62bf9de2511aeb8e036a339ec8be8423" args="(const ObjectId &amp;commit) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGit_1_1ObjectId.html">Git::ObjectId</a> Git::getTreeFromCommit           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGit_1_1ObjectId.html">ObjectId</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>commit</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the tree for a particular commit. 
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case of a git error. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00210">210</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00211"></a>00211 {
<a name="l00212"></a>00212   std::string treeLine;
<a name="l00213"></a>00213   <span class="keywordflow">if</span> (!<a class="code" href="classGit.html#3dccd1727396de007ec5b43e96930a1b" title="Returns a line identified by a tag from the output of a git command.">getCmdResult</a>(<span class="stringliteral">"cat-file -p "</span> + commit.toString(), treeLine, <span class="stringliteral">"tree"</span>))
<a name="l00214"></a>00214     <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git: could not parse tree from commit '"</span> 
<a name="l00215"></a>00215                     + commit.toString() + <span class="stringliteral">"'"</span>);
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   std::vector&lt;std::string&gt; v;
<a name="l00218"></a>00218   boost::split(v, treeLine, boost::is_any_of(<span class="stringliteral">" "</span>));
<a name="l00219"></a>00219   <span class="keywordflow">if</span> (v.size() != 2)
<a name="l00220"></a>00220     <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git: could not parse tree from commit '"</span>
<a name="l00221"></a>00221                     + commit.toString() + <span class="stringliteral">"': '"</span> + treeLine + <span class="stringliteral">"'"</span>);
<a name="l00222"></a>00222   <span class="keywordflow">return</span> ObjectId(v[1]);
<a name="l00223"></a>00223 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="910f3a6123b494897cdedf7ba4ef648b"></a><!-- doxytag: member="Git::treeGetObject" ref="910f3a6123b494897cdedf7ba4ef648b" args="(const ObjectId &amp;tree, int index) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structGit_1_1Object.html">Git::Object</a> Git::treeGetObject           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGit_1_1ObjectId.html">ObjectId</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get some info on a tree object. 
<p>
The object is specified based on its index in the parent tree object.<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case of a git error. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00225">225</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00226"></a>00226 {
<a name="l00227"></a>00227   std::string objectLine;
<a name="l00228"></a>00228   <span class="keywordflow">if</span> (!<a class="code" href="classGit.html#3dccd1727396de007ec5b43e96930a1b" title="Returns a line identified by a tag from the output of a git command.">getCmdResult</a>(<span class="stringliteral">"cat-file -p "</span> + tree.toString(), objectLine, index))
<a name="l00229"></a>00229     <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git: could not read object %"</span>
<a name="l00230"></a>00230                     + boost::lexical_cast&lt;std::string&gt;(index)
<a name="l00231"></a>00231                     + <span class="stringliteral">"  from tree "</span> + tree.toString());
<a name="l00232"></a>00232   <span class="keywordflow">else</span> {
<a name="l00233"></a>00233     std::vector&lt;std::string&gt; v1, v2;
<a name="l00234"></a>00234     boost::split(v1, objectLine, boost::is_any_of(<span class="stringliteral">"\t"</span>));
<a name="l00235"></a>00235     <span class="keywordflow">if</span> (v1.size() != 2)
<a name="l00236"></a>00236       <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git: could not parse tree object line: '"</span>
<a name="l00237"></a>00237                       + objectLine + <span class="stringliteral">"'"</span>);
<a name="l00238"></a>00238     boost::split(v2, v1[0], boost::is_any_of(<span class="stringliteral">" "</span>));
<a name="l00239"></a>00239     <span class="keywordflow">if</span> (v2.size() != 3)
<a name="l00240"></a>00240       <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git: could not parse tree object line: '"</span>
<a name="l00241"></a>00241                       + objectLine + <span class="stringliteral">"'"</span>);
<a name="l00242"></a>00242  
<a name="l00243"></a>00243     <span class="keyword">const</span> std::string&amp; stype = v2[1];
<a name="l00244"></a>00244     <a class="code" href="classGit.html#b282f46c36a47ddff9bc7be7c993041a" title="Git object type.">ObjectType</a> type;
<a name="l00245"></a>00245     <span class="keywordflow">if</span> (stype == <span class="stringliteral">"tree"</span>)
<a name="l00246"></a>00246       type = <a class="code" href="classGit.html#b282f46c36a47ddff9bc7be7c993041ae94d3a7ff6594f6b3b0dc121fbd01564">Tree</a>;
<a name="l00247"></a>00247     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stype == <span class="stringliteral">"blob"</span>)
<a name="l00248"></a>00248       type = <a class="code" href="classGit.html#b282f46c36a47ddff9bc7be7c993041a64c3a7b641cdc0cb2c4203fc0bef1a4a">Blob</a>;
<a name="l00249"></a>00249     <span class="keywordflow">else</span>
<a name="l00250"></a>00250       <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git: Unknown type: "</span> + stype);
<a name="l00251"></a>00251 
<a name="l00252"></a>00252     <a class="code" href="structGit_1_1Object.html" title="Git object.">Git::Object</a> result(ObjectId(v2[2]), type);
<a name="l00253"></a>00253     result.name = v1[1];
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     <span class="keywordflow">return</span> result;
<a name="l00256"></a>00256   }
<a name="l00257"></a>00257 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="be86381afbbab0adb0680ae268752f1f"></a><!-- doxytag: member="Git::treeSize" ref="be86381afbbab0adb0680ae268752f1f" args="(const ObjectId &amp;tree) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Git::treeSize           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGit_1_1ObjectId.html">ObjectId</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tree</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the number of objects inside a tree object. 
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case of a git error. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00259">259</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00260"></a>00260 {
<a name="l00261"></a>00261   <span class="keywordflow">return</span> <a class="code" href="classGit.html#451e493481c2b397497107a6e60a6360" title="Returns the number of lines in the output of a git command.">getCmdResultLineCount</a>(<span class="stringliteral">"cat-file -p "</span> + tree.toString());
<a name="l00262"></a>00262 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="cf2d699d9f9bdfb42afb0f61e85b2f88"></a><!-- doxytag: member="Git::catFile" ref="cf2d699d9f9bdfb42afb0f61e85b2f88" args="(const ObjectId &amp;id) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Git::catFile           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGit_1_1ObjectId.html">ObjectId</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the raw contents of a git object. 
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case of a git error. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00193">193</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00194"></a>00194 {
<a name="l00195"></a>00195   std::string result;
<a name="l00196"></a>00196 
<a name="l00197"></a>00197   <span class="keywordflow">if</span> (!<a class="code" href="classGit.html#3dccd1727396de007ec5b43e96930a1b" title="Returns a line identified by a tag from the output of a git command.">getCmdResult</a>(<span class="stringliteral">"cat-file -p "</span> + <span class="keywordtype">id</span>.toString(), result, -1))
<a name="l00198"></a>00198     <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git: could not cat '"</span> + <span class="keywordtype">id</span>.toString() + <span class="stringliteral">"'"</span>);
<a name="l00199"></a>00199 
<a name="l00200"></a>00200   <span class="keywordflow">return</span> result;
<a name="l00201"></a>00201 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="04766dfcc9edcae7c12e6ff373176c7c"></a><!-- doxytag: member="Git::checkRepository" ref="04766dfcc9edcae7c12e6ff373176c7c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Git::checkRepository           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks the repository. 
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case the repository is not a valid. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00322">322</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00323"></a>00323 {
<a name="l00324"></a>00324   POpenWrapper p(<span class="stringliteral">"git --git-dir="</span> + <a class="code" href="classGit.html#5f478cb0fb21487e60f87b93d4277440" title="The path to the repository.">repository_</a> + <span class="stringliteral">" branch"</span>, <a class="code" href="classGit.html#0097b8efc1e8530cc11133622684e9ef" title="A small LRU cache that stores results of git commands.">cache_</a>);
<a name="l00325"></a>00325 
<a name="l00326"></a>00326   std::string r;
<a name="l00327"></a>00327   <span class="keywordflow">if</span> (p.exitStatus() != 0)
<a name="l00328"></a>00328     <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git error: "</span> + p.readLine(r));
<a name="l00329"></a>00329 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3dccd1727396de007ec5b43e96930a1b"></a><!-- doxytag: member="Git::getCmdResult" ref="3dccd1727396de007ec5b43e96930a1b" args="(const std::string &amp;cmd, std::string &amp;result, const std::string &amp;tag) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Git::getCmdResult           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>tag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a line identified by a tag from the output of a git command. 
<p>
The line is filled in <em>result</em>. Returns whether a line starting with <em>tag</em> could be found.<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case the command failed </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00287">287</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00289"></a>00289 {
<a name="l00290"></a>00290   POpenWrapper p(<span class="stringliteral">"git --git-dir="</span> + <a class="code" href="classGit.html#5f478cb0fb21487e60f87b93d4277440" title="The path to the repository.">repository_</a> + <span class="stringliteral">" "</span> + gitCmd, <a class="code" href="classGit.html#0097b8efc1e8530cc11133622684e9ef" title="A small LRU cache that stores results of git commands.">cache_</a>);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292   <span class="keywordflow">if</span> (p.exitStatus() != 0)
<a name="l00293"></a>00293     <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git error: "</span> + p.readLine(result));
<a name="l00294"></a>00294 
<a name="l00295"></a>00295   <span class="keywordflow">while</span> (!p.finished()) {
<a name="l00296"></a>00296     p.readLine(result);
<a name="l00297"></a>00297     <span class="keywordflow">if</span> (boost::starts_with(result, tag))
<a name="l00298"></a>00298       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00299"></a>00299   }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00302"></a>00302 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5c0f41b8540cae5aef55343dcbbbf8b6"></a><!-- doxytag: member="Git::getCmdResult" ref="5c0f41b8540cae5aef55343dcbbbf8b6" args="(const std::string &amp;cmd, std::string &amp;result, int index) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Git::getCmdResult           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the <em>i</em>th line from the output of a git command. 
<p>
The line is filled in <em>result</em>. Returns the whole git output if <em>index</em> = -1, otherwise the line with line number <em>index</em>.<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case the command failed </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00264">264</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00266"></a>00266 {
<a name="l00267"></a>00267   POpenWrapper p(<span class="stringliteral">"git --git-dir="</span> + <a class="code" href="classGit.html#5f478cb0fb21487e60f87b93d4277440" title="The path to the repository.">repository_</a> + <span class="stringliteral">" "</span> + gitCmd, <a class="code" href="classGit.html#0097b8efc1e8530cc11133622684e9ef" title="A small LRU cache that stores results of git commands.">cache_</a>);
<a name="l00268"></a>00268 
<a name="l00269"></a>00269   <span class="keywordflow">if</span> (p.exitStatus() != 0)
<a name="l00270"></a>00270     <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git error: "</span> + p.readLine(result));
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   <span class="keywordflow">if</span> (index == -1) {
<a name="l00273"></a>00273     result = p.contents();
<a name="l00274"></a>00274     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00275"></a>00275   } <span class="keywordflow">else</span>
<a name="l00276"></a>00276     p.readLine(result);
<a name="l00277"></a>00277 
<a name="l00278"></a>00278   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; index; ++i) {
<a name="l00279"></a>00279     <span class="keywordflow">if</span> (p.finished())
<a name="l00280"></a>00280       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00281"></a>00281     p.readLine(result);
<a name="l00282"></a>00282   }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00285"></a>00285 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="451e493481c2b397497107a6e60a6360"></a><!-- doxytag: member="Git::getCmdResultLineCount" ref="451e493481c2b397497107a6e60a6360" args="(const std::string &amp;cmd) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Git::getCmdResultLineCount           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>cmd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the number of lines in the output of a git command. 
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classGit_1_1Exception.html" title="Exception class.">Exception</a></em>&nbsp;</td><td>: in case the command failed </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Git_8C-source.html#l00304">304</a> of file <a class="el" href="Git_8C-source.html">Git.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00305"></a>00305 {
<a name="l00306"></a>00306   POpenWrapper p(<span class="stringliteral">"git --git-dir="</span> + <a class="code" href="classGit.html#5f478cb0fb21487e60f87b93d4277440" title="The path to the repository.">repository_</a> + <span class="stringliteral">" "</span> + gitCmd, <a class="code" href="classGit.html#0097b8efc1e8530cc11133622684e9ef" title="A small LRU cache that stores results of git commands.">cache_</a>);
<a name="l00307"></a>00307 
<a name="l00308"></a>00308   std::string r;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310   <span class="keywordflow">if</span> (p.exitStatus() != 0)
<a name="l00311"></a>00311     <span class="keywordflow">throw</span> Exception(<span class="stringliteral">"Git error: "</span> + p.readLine(r));
<a name="l00312"></a>00312 
<a name="l00313"></a>00313   <span class="keywordtype">int</span> result = 0;
<a name="l00314"></a>00314   <span class="keywordflow">while</span> (!p.finished()) {
<a name="l00315"></a>00315     p.readLine(r);
<a name="l00316"></a>00316     ++result;
<a name="l00317"></a>00317   }
<a name="l00318"></a>00318 
<a name="l00319"></a>00319   <span class="keywordflow">return</span> result;
<a name="l00320"></a>00320 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="5f478cb0fb21487e60f87b93d4277440"></a><!-- doxytag: member="Git::repository_" ref="5f478cb0fb21487e60f87b93d4277440" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classGit.html#5f478cb0fb21487e60f87b93d4277440">Git::repository_</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The path to the repository. 
<p>

<p>Definition at line <a class="el" href="Git_8h-source.html#l00124">124</a> of file <a class="el" href="Git_8h-source.html">Git.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="0097b8efc1e8530cc11133622684e9ef"></a><!-- doxytag: member="Git::cache_" ref="0097b8efc1e8530cc11133622684e9ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGit.html#23da7b806839f7a482935a44142b04c9">Cache</a> <a class="el" href="classGit.html#0097b8efc1e8530cc11133622684e9ef">Git::cache_</a><code> [mutable, private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A small LRU cache that stores results of git commands. 
<p>

<p>Definition at line <a class="el" href="Git_8h-source.html#l00128">128</a> of file <a class="el" href="Git_8h-source.html">Git.h</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>/home/koen/project/wt/public-git/wt/examples/gitmodel/<a class="el" href="Git_8h-source.html">Git.h</a><li>/home/koen/project/wt/public-git/wt/examples/gitmodel/<a class="el" href="Git_8C-source.html">Git.C</a></ul>
</div>
<hr size="1"><address style="align: right;"><small>
Generated on Fri Sep 10 16:32:57 2010 for <a href="http://www.webtoolkit.eu/wt/">Wt</a> by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6</small></address>
</body>
</html>
