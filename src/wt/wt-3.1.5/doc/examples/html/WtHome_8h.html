<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Wt examples: /home/koen/project/wt/public-git/wt/examples/wt-homepage/WtHome.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>/home/koen/project/wt/public-git/wt/examples/wt-homepage/WtHome.h File Reference</h1><code>#include &lt;Wt/WApplication&gt;</code><br>
<code>#include &quot;<a class="el" href="Home_8h-source.html">Home.h</a>&quot;</code><br>

<p>
<a href="WtHome_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWtHome.html">WtHome</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html">WApplication</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="WtHome_8h.html#dd0ef25910d91a7bd79ffb3c07a9af32">createWtHomeApplication</a> (const <a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WEnvironment.html">WEnvironment</a> &amp;env)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="dd0ef25910d91a7bd79ffb3c07a9af32"></a><!-- doxytag: member="WtHome.h::createWtHomeApplication" ref="dd0ef25910d91a7bd79ffb3c07a9af32" args="(const WEnvironment &amp;env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html">WApplication</a>* createWtHomeApplication           </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WEnvironment.html">WEnvironment</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>env</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="WtHome_8C-source.html#l00166">166</a> of file <a class="el" href="WtHome_8C-source.html">WtHome.C</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00167"></a>00167 {
<a name="l00168"></a>00168   <span class="comment">// support for old (&lt; Wt-2.2) homepage URLS: redirect from "states"</span>
<a name="l00169"></a>00169   <span class="comment">// to "internal paths"</span>
<a name="l00170"></a>00170   <span class="comment">// this contains the initial "history state" in old Wt versions</span>
<a name="l00171"></a>00171   <span class="keyword">const</span> std::string *historyKey = env.<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WEnvironment.html#3f87915f10f39b18eac28bac65c0cd46">getParameter</a>(<span class="stringliteral">"historyKey"</span>);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="keywordflow">if</span> (historyKey) {
<a name="l00174"></a>00174     <span class="keyword">const</span> <span class="keywordtype">char</span> *mainStr[]
<a name="l00175"></a>00175       = { <span class="stringliteral">"main:0"</span>, <span class="stringliteral">"/"</span>,
<a name="l00176"></a>00176           <span class="stringliteral">"main:1"</span>, <span class="stringliteral">"/news"</span>,
<a name="l00177"></a>00177           <span class="stringliteral">"main:2"</span>, <span class="stringliteral">"/features"</span>,
<a name="l00178"></a>00178           <span class="stringliteral">"main:4"</span>, <span class="stringliteral">"/examples"</span>,
<a name="l00179"></a>00179           <span class="stringliteral">"main:3"</span>, <span class="stringliteral">"/documentation"</span>,
<a name="l00180"></a>00180           <span class="stringliteral">"main:5"</span>, <span class="stringliteral">"/download"</span>,
<a name="l00181"></a>00181           <span class="stringliteral">"main:6"</span>, <span class="stringliteral">"/community"</span> };
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="keyword">const</span> <span class="keywordtype">char</span> *exampleStr[]
<a name="l00184"></a>00184       = { <span class="stringliteral">"example:0"</span>, <span class="stringliteral">"/examples"</span>,
<a name="l00185"></a>00185           <span class="stringliteral">"example:1"</span>, <span class="stringliteral">"/examples/charts"</span>,
<a name="l00186"></a>00186           <span class="stringliteral">"example:2"</span>, <span class="stringliteral">"/examples/wt-homepage"</span>,
<a name="l00187"></a>00187           <span class="stringliteral">"example:3"</span>, <span class="stringliteral">"/examples/treelist"</span>,
<a name="l00188"></a>00188           <span class="stringliteral">"example:4"</span>, <span class="stringliteral">"/examples/hangman"</span>,
<a name="l00189"></a>00189           <span class="stringliteral">"example:5"</span>, <span class="stringliteral">"/examples/chat"</span>,
<a name="l00190"></a>00190           <span class="stringliteral">"example:6"</span>, <span class="stringliteral">"/examples/mail-composer"</span>,
<a name="l00191"></a>00191           <span class="stringliteral">"example:7"</span>, <span class="stringliteral">"/examples/drag-and-drop"</span>,
<a name="l00192"></a>00192           <span class="stringliteral">"example:8"</span>, <span class="stringliteral">"/examples/file-explorer"</span>,
<a name="l00193"></a>00193           <span class="stringliteral">"example:9"</span>, <span class="stringliteral">"/examples/calendar"</span> };
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     <span class="keywordflow">if</span> (historyKey-&gt;find(<span class="stringliteral">"main:4"</span>) != std::string::npos) {
<a name="l00196"></a>00196       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; 10; ++i)
<a name="l00197"></a>00197         <span class="keywordflow">if</span> (historyKey-&gt;find(exampleStr[i*2]) != std::string::npos) {
<a name="l00198"></a>00198           <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html">WApplication</a> *app = <span class="keyword">new</span> <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html">WApplication</a>(env);
<a name="l00199"></a>00199           app-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html#75067771ba8fcc56e174f2e741ce278f">log</a>(<span class="stringliteral">"notice"</span>) &lt;&lt; <span class="stringliteral">"redirecting old style URL '"</span>
<a name="l00200"></a>00200                              &lt;&lt; *historyKey &lt;&lt; <span class="stringliteral">"' to internal path: '"</span>
<a name="l00201"></a>00201                              &lt;&lt; exampleStr[i*2+1] &lt;&lt; <span class="stringliteral">"'"</span>;
<a name="l00202"></a>00202           app-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html#4dcbf69c8b09c301577b5b6aa8a4da18">redirect</a>(app-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html#37b4cf44f393688785ed3b34f53fead1">bookmarkUrl</a>(exampleStr[i*2+1]));
<a name="l00203"></a>00203           app-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html#5231d54ed34982f4366058eb6440c8f7">quit</a>();
<a name="l00204"></a>00204           <span class="keywordflow">return</span> app;
<a name="l00205"></a>00205         }
<a name="l00206"></a>00206     } <span class="keywordflow">else</span>
<a name="l00207"></a>00207       <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; 6; ++i)
<a name="l00208"></a>00208         <span class="keywordflow">if</span> (historyKey-&gt;find(mainStr[i*2]) != std::string::npos) {
<a name="l00209"></a>00209           <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html">WApplication</a> *app = <span class="keyword">new</span> <a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html">WApplication</a>(env);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211           app-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html#75067771ba8fcc56e174f2e741ce278f">log</a>(<span class="stringliteral">"notice"</span>) &lt;&lt; <span class="stringliteral">"redirecting old style URL '"</span>
<a name="l00212"></a>00212                              &lt;&lt; *historyKey &lt;&lt; <span class="stringliteral">"' to internal path: '"</span>
<a name="l00213"></a>00213                              &lt;&lt; mainStr[i*2+1] &lt;&lt; <span class="stringliteral">"'"</span>;
<a name="l00214"></a>00214           app-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html#4dcbf69c8b09c301577b5b6aa8a4da18">redirect</a>(app-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html#37b4cf44f393688785ed3b34f53fead1">bookmarkUrl</a>(mainStr[i*2+1]));
<a name="l00215"></a>00215           app-&gt;<a class="codeRef" doxygen="wt.tags:../../reference/html/" href="../../reference/html/classWt_1_1WApplication.html#5231d54ed34982f4366058eb6440c8f7">quit</a>();
<a name="l00216"></a>00216           <span class="keywordflow">return</span> app;
<a name="l00217"></a>00217         }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219     <span class="comment">// unknown history key, just continue</span>
<a name="l00220"></a>00220   }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classWtHome.html">WtHome</a>(env);
<a name="l00223"></a>00223 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="align: right;"><small>
Generated on Fri Sep 10 16:32:57 2010 for <a href="http://www.webtoolkit.eu/wt/">Wt</a> by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6</small></address>
</body>
</html>
