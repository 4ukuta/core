<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Wt: Wt::Dbo::collection&lt; C &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceWt.html">Wt</a>::<a class="el" href="namespaceWt_1_1Dbo.html">Dbo</a>::<a class="el" href="classWt_1_1Dbo_1_1collection.html">collection</a>
  </div>
</div>
<div class="contents">
<h1>Wt::Dbo::collection&lt; C &gt; Class Template Reference<br>
<small>
[<a class="el" href="group__dbo.html">Database Objects (Dbo)</a>]</small>
</h1><!-- doxytag: class="Wt::Dbo::collection" -->An STL container for iterating query results.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;Wt/Dbo/collection&gt;</code>
<p>

<p>
<a href="classWt_1_1Dbo_1_1collection-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="49af50adc6d43f473f2bb45e57a77e0d"></a><!-- doxytag: member="Wt::Dbo::collection::value_type" ref="49af50adc6d43f473f2bb45e57a77e0d" args="" -->
typedef C&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#49af50adc6d43f473f2bb45e57a77e0d">value_type</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Value type. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#ffe4c75e050ce2a5980a10498bc5fccb">collection</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor.  <a href="#ffe4c75e050ce2a5980a10498bc5fccb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bd01cbfac7573fafa8cc69bf58cd8cd4"></a><!-- doxytag: member="Wt::Dbo::collection::~collection" ref="bd01cbfac7573fafa8cc69bf58cd8cd4" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#bd01cbfac7573fafa8cc69bf58cd8cd4">~collection</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="34580ef0194da3b8366182fbbc3b4c49"></a><!-- doxytag: member="Wt::Dbo::collection::begin" ref="34580ef0194da3b8366182fbbc3b4c49" args="()" -->
<a class="el" href="classWt_1_1Dbo_1_1collection_1_1iterator.html">iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#34580ef0194da3b8366182fbbc3b4c49">begin</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns an <a class="el" href="classWt_1_1Dbo_1_1collection_1_1iterator.html" title="Iterator.">iterator</a> to the begin of the collection. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4a6f1178ce470936900f269a9ccf97de"></a><!-- doxytag: member="Wt::Dbo::collection::end" ref="4a6f1178ce470936900f269a9ccf97de" args="()" -->
<a class="el" href="classWt_1_1Dbo_1_1collection_1_1iterator.html">iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#4a6f1178ce470936900f269a9ccf97de">end</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns an <a class="el" href="classWt_1_1Dbo_1_1collection_1_1iterator.html" title="Iterator.">iterator</a> to the end of the collection. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fa7065c73dfcc8df48a89b0f7d98395e"></a><!-- doxytag: member="Wt::Dbo::collection::begin" ref="fa7065c73dfcc8df48a89b0f7d98395e" args="() const " -->
<a class="el" href="classWt_1_1Dbo_1_1collection_1_1const__iterator.html">const_iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#fa7065c73dfcc8df48a89b0f7d98395e">begin</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a const <a class="el" href="classWt_1_1Dbo_1_1collection_1_1iterator.html" title="Iterator.">iterator</a> to the begin of the collection. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4fff6804cb98618a4709e4e7e84a13d6"></a><!-- doxytag: member="Wt::Dbo::collection::end" ref="4fff6804cb98618a4709e4e7e84a13d6" args="() const " -->
<a class="el" href="classWt_1_1Dbo_1_1collection_1_1const__iterator.html">const_iterator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#4fff6804cb98618a4709e4e7e84a13d6">end</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a const <a class="el" href="classWt_1_1Dbo_1_1collection_1_1iterator.html" title="Iterator.">iterator</a> to the end of the collection. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">size_type&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#82fd36791d677487a1c2986de0b72150">size</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the size.  <a href="#82fd36791d677487a1c2986de0b72150"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#7b497add0d6ac2b1e098820f9ee64c93">insert</a> (C c)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inserts an object.  <a href="#7b497add0d6ac2b1e098820f9ee64c93"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#35d046e991b3fec59af85d501fd49e51">erase</a> (C c)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes an object.  <a href="#35d046e991b3fec59af85d501fd49e51"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="edac567b3edd05532d53de7c0b1d7366"></a><!-- doxytag: member="Wt::Dbo::collection::session" ref="edac567b3edd05532d53de7c0b1d7366" args="() const " -->
<a class="el" href="classWt_1_1Dbo_1_1Session.html">Session</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#edac567b3edd05532d53de7c0b1d7366">session</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the session to which this collection is bound. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classWt_1_1Dbo_1_1Query.html">Query</a>&lt; C, <a class="el" href="structWt_1_1Dbo_1_1DynamicBinding.html">DynamicBinding</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection.html#6b8aa118fad63539958ea8532ae37d68">find</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the query that backs the <a class="el" href="classWt_1_1Dbo_1_1collection.html" title="An STL container for iterating query results.">collection</a>.  <a href="#6b8aa118fad63539958ea8532ae37d68"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection_1_1const__iterator.html">const_iterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Const Iterator.  <a href="classWt_1_1Dbo_1_1collection_1_1const__iterator.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWt_1_1Dbo_1_1collection_1_1iterator.html">iterator</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iterator.  <a href="classWt_1_1Dbo_1_1collection_1_1iterator.html#_details">More...</a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class C&gt;<br>
 class Wt::Dbo::collection&lt; C &gt;</h3>

An STL container for iterating query results. 
<p>
This is an STL-compatible container that is backed by an SQL query for fetching data.<p>
A collection has two uses in <a class="el" href="namespaceWt_1_1Dbo.html" title="Namespace for the Database Objects (Dbo).">Wt::Dbo</a>:<ul>
<li>to iterate the results of a <a class="el" href="classWt_1_1Dbo_1_1Query.html" title="A database query.">Query</a>;</li><li>to map the many-side of a Many-to-One or Many-to-Many relation.</li></ul>
<p>
Its iterators implement the InputIterator requirements, meaning you have to traverse the results from <a class="el" href="classWt_1_1Dbo_1_1collection.html#34580ef0194da3b8366182fbbc3b4c49" title="Returns an iterator to the begin of the collection.">begin()</a> to <a class="el" href="classWt_1_1Dbo_1_1collection.html#4a6f1178ce470936900f269a9ccf97de" title="Returns an iterator to the end of the collection.">end()</a> solely by alternating between reading an element and incrementing the <a class="el" href="classWt_1_1Dbo_1_1collection_1_1iterator.html" title="Iterator.">iterator</a>. When the <a class="el" href="classWt_1_1Dbo_1_1collection.html" title="An STL container for iterating query results.">collection</a> represents the results of a <a class="el" href="classWt_1_1Dbo_1_1Query.html" title="A database query.">Query</a>, you can only iterate the results just once: i.e. you can have only one <a class="el" href="classWt_1_1Dbo_1_1collection.html#34580ef0194da3b8366182fbbc3b4c49" title="Returns an iterator to the begin of the collection.">begin()</a> call.<p>
The container is read only, unless it is being used as a member of a dbo to manage a Many-to-Many relation. In that case, you may also <a class="el" href="classWt_1_1Dbo_1_1collection.html#7b497add0d6ac2b1e098820f9ee64c93" title="Inserts an object.">insert()</a> and <a class="el" href="classWt_1_1Dbo_1_1collection.html#35d046e991b3fec59af85d501fd49e51" title="Removes an object.">erase()</a> may also be used.<p>
You will typically iterate the container results for local processing, or copy the results into a standard STL container for extended processing. Not only the weak guarantees of the iterators make this useful, but also in the current implementation of the library, all sql statements are non-reentrant prepared statements (this limitation is likely to be removed in the future): only one collection, which is backed by the same SQL statement may be used at once per session. Thus, the following will fail:<p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">void</span> iterateChildren(<a class="code" href="classWt_1_1Dbo_1_1ptr.html" title="A smart pointer for database objects.">Wt::Dbo::ptr&lt;Comment&gt;</a> comment)
 {
     <span class="keyword">typedef</span> <a class="code" href="classWt_1_1Dbo_1_1collection.html" title="An STL container for iterating query results.">Wt::Dbo::collection&lt;Wt::Dbo::ptr&lt;Comment&gt;</a> &gt; Comments;
     Comments children = comment-&gt;children;

     <span class="keywordflow">for</span> (Comments::const_iterator i = children.begin(); i != children.end(); ++i) {
        std::cerr &lt;&lt; <span class="stringliteral">"Comment: "</span> &lt;&lt; i-&gt;text &lt;&lt; std::endl;
        iterateChildren(*i); <span class="comment">// Illegal since will result in nested use of the same query.</span>
     }
 }
</pre></div><p>
If you cannot gaurantee that during its iteration the same query will be reused, you should copy the results in a standard container. Note that this is no big overhead since dbo pointers are lightweight.<p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">void</span> iterateChildren(<a class="code" href="classWt_1_1Dbo_1_1ptr.html" title="A smart pointer for database objects.">Wt::Dbo::ptr&lt;Comment&gt;</a> comment)
 {
     <span class="keyword">typedef</span> std::vector&lt;Wt::Dbo::ptr&lt;Comment&gt; &gt; Comments;

     Comments children(comment-&gt;children.begin(), comment-&gt;children.end()); <span class="comment">// copy into an STL container, freeing the underlying query for reuse </span>

     <span class="keywordflow">for</span> (Comments::const_iterator i = children.begin(); i != children.end(); ++i) {
        std::cerr &lt;&lt; <span class="stringliteral">"Comment: "</span> &lt;&lt; i-&gt;text &lt;&lt; std::endl;
        iterateChildren(*i); <span class="comment">// Okay now.</span>
     }
 }
</pre></div><p>
Before iterating a collection, the session is flushed. In this way, the collection will reflect any pending dirty changes. <hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="ffe4c75e050ce2a5980a10498bc5fccb"></a><!-- doxytag: member="Wt::Dbo::collection::collection" ref="ffe4c75e050ce2a5980a10498bc5fccb" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class C&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classWt_1_1Dbo_1_1collection.html">Wt::Dbo::collection</a>&lt; C &gt;::<a class="el" href="classWt_1_1Dbo_1_1collection.html">collection</a>           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default constructor. 
<p>
Constructs an empty collection that is not bound to a database session or query. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="82fd36791d677487a1c2986de0b72150"></a><!-- doxytag: member="Wt::Dbo::collection::size" ref="82fd36791d677487a1c2986de0b72150" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class C&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classWt_1_1Dbo_1_1collection.html">collection</a>&lt; C &gt;::size_type <a class="el" href="classWt_1_1Dbo_1_1collection.html">Wt::Dbo::collection</a>&lt; C &gt;::size           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the size. 
<p>
This will execute an SQL <code>count(*)</code> statement to fetch the size of the collection without fetching all results.<p>
If the collection represents the result of a <a class="el" href="classWt_1_1Dbo_1_1Query.html" title="A database query.">Query</a>, the underlying query is run only once, and its result is cached so that <a class="el" href="classWt_1_1Dbo_1_1collection.html#82fd36791d677487a1c2986de0b72150" title="Returns the size.">size()</a> always returns the same value. 
</div>
</div><p>
<a class="anchor" name="7b497add0d6ac2b1e098820f9ee64c93"></a><!-- doxytag: member="Wt::Dbo::collection::insert" ref="7b497add0d6ac2b1e098820f9ee64c93" args="(C c)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class C&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classWt_1_1Dbo_1_1collection.html">Wt::Dbo::collection</a>&lt; C &gt;::insert           </td>
          <td>(</td>
          <td class="paramtype">C&nbsp;</td>
          <td class="paramname"> <em>c</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Inserts an object. 
<p>
This is only useful for a collection that implements one side of a ManyToMany relation. 
</div>
</div><p>
<a class="anchor" name="35d046e991b3fec59af85d501fd49e51"></a><!-- doxytag: member="Wt::Dbo::collection::erase" ref="35d046e991b3fec59af85d501fd49e51" args="(C c)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class C&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classWt_1_1Dbo_1_1collection.html">Wt::Dbo::collection</a>&lt; C &gt;::erase           </td>
          <td>(</td>
          <td class="paramtype">C&nbsp;</td>
          <td class="paramname"> <em>c</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes an object. 
<p>
This is only useful for a collection that implements one side of a ManyToMany relation. 
</div>
</div><p>
<a class="anchor" name="6b8aa118fad63539958ea8532ae37d68"></a><!-- doxytag: member="Wt::Dbo::collection::find" ref="6b8aa118fad63539958ea8532ae37d68" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class C&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classWt_1_1Dbo_1_1Query.html">Query</a>&lt; C, <a class="el" href="structWt_1_1Dbo_1_1DynamicBinding.html">DynamicBinding</a> &gt; <a class="el" href="classWt_1_1Dbo_1_1collection.html">Wt::Dbo::collection</a>&lt; C &gt;::find           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the query that backs the <a class="el" href="classWt_1_1Dbo_1_1collection.html" title="An STL container for iterating query results.">collection</a>. 
<p>
Returns the query that backs the <a class="el" href="classWt_1_1Dbo_1_1collection.html" title="An STL container for iterating query results.">collection</a>. This can be used to search for a subset or to browse the results in a particular order.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This only works for a <a class="el" href="classWt_1_1Dbo_1_1collection.html" title="An STL container for iterating query results.">collection</a> that represents the many-side of a <a class="el" href="classWt_1_1Dbo_1_1collection.html" title="An STL container for iterating query results.">collection</a> (i.e. for which <a class="el" href="group__dbo.html#g1a086b583fb150dbd4c5b4ba92bc177f" title="Maps the &quot;Many&quot;-side of a ManyToOne or ManyToMany relation.">hasMany()</a> is called). </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="align: right;"><small>
Generated on Fri Sep 10 16:33:04 2010 for <a href="http://www.webtoolkit.eu/wt/">Wt</a> by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6</small></address>
</body>
</html>
